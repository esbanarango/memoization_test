// Generated by CoffeeScript 1.6.3
(function() {
  var cache_retrieve, cache_store, data, memoize;

  data = {};

  cache_store = function(key, value, callback) {
    data[key] = value;
    return callback(value);
  };

  cache_retrieve = function(key, callback) {
    return callback(data[key]);
  };

  memoize = function(slow_fn) {
    var slice;
    if (typeof slow_fn === "function") {
      slice = Array.prototype.slice;
      return function() {
        var args, input, slow_fn_callback;
        args = slice.call(arguments);
        slow_fn_callback = args[1];
        input = args[0];
        return cache_retrieve(input, function(value) {
          if (value) {
            return slow_fn_callback(value);
          } else {
            return slow_fn.apply(this, [
              input, function(value) {
                return cache_store(input, value, function(value) {
                  return slow_fn_callback(value);
                });
              }
            ]);
          }
        });
      };
    }
  };

  module.exports = memoize;

}).call(this);
